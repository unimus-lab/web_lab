import{u as ga,g as M,r as $,o as p,c as b,a as t,w as P,b as X,v as Y,d as l,s as ka,e as V,f as Z,h as ya,i as ea,j as s,k as x,F as L,l as Ba,m as ta,t as D,n as wa,p as na,q as $a,x as Va,U as la,D as sa,y as N,z as oa,K as ra,G as ua,A as da,B as ia,O as C,S as w,E as ca,N as S,C as R,I as ma,H as j,T as K,J,L as xa,M as Ca,P as ja,Q as Aa,R as Pa,V as Da,W as Sa}from"./vendor.40dd5180.js";const Ea=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))m(d);new MutationObserver(d=>{for(const o of d)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&m(u)}).observe(document,{childList:!0,subtree:!0});function c(d){const o={};return d.integrity&&(o.integrity=d.integrity),d.referrerpolicy&&(o.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?o.credentials="include":d.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(d){if(d.ep)return;d.ep=!0;const o=c(d);fetch(d.href,o)}};Ea();const Oa={class:"container"},qa={class:"main-wrapper"},Ua={class:"row"},Ta={class:"col-12 col-md-4 offset-md-4"},Ia=t("div",{class:"text-center mb-5"},[t("img",{src:"https://rekreartive.com/wp-content/uploads/2018/10/Logo-UNIMS-Universitas-Muhammadiyah-Semarang-Original.jpg",class:"img-fluid",style:{"max-width":"125px"}})],-1),La=["onSubmit"],Ma={class:"form-floating mb-3"},Na=t("label",{for:"floatingInput"},"Email",-1),Ra={class:"form-floating mb-3"},Ka=t("label",{for:"floatingPassword"},"Password",-1),Ja=t("button",{class:"btn btn-success form-control",type:"submit"},"Login",-1),za={setup(h){const n=ga(),c=M(),m=$({email:"",password:""}),d=async()=>{try{await ka(c,m.email,m.password).then(o=>{const u=c.currentUser;n.push({name:"DaftarBahanAlat"})})}catch(o){switch(o.code){case"auth/user-not-found":alert("User tidak di temukan di database, hubungi admin untuk mendapatkan akses masuk.");break;case"auth/wrong-password":alert("Password salah.");break;default:alert("Something went wrong.")}return}};return(o,u)=>(p(),b("div",Oa,[t("div",qa,[t("div",Ua,[t("div",Ta,[Ia,t("form",{onSubmit:P(d,["prevent"])},[t("div",Ma,[X(t("input",{type:"email",class:"form-control",id:"floatingInput",placeholder:"name@example.com","onUpdate:modelValue":u[0]||(u[0]=i=>l(m).email=i),required:""},null,512),[[Y,l(m).email]]),Na]),t("div",Ra,[X(t("input",{type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password","onUpdate:modelValue":u[1]||(u[1]=i=>l(m).password=i),required:""},null,512),[[Y,l(m).password]]),Ka]),Ja],40,La)])])])]))}},Ha={class:"navbar sticky-top navbar-expand-lg navbar-dark bg-dark"},Fa={class:"container"},Qa=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),Wa={class:"collapse navbar-collapse",id:"navbarTogglerDemo01"},Ga={class:"navbar-nav me-auto mb-2 mb-lg-0"},Xa={class:"nav-item"},Ya=ta("Alat"),Za={class:"nav-item"},ae=ta("Bahan Padat"),ee=ta("Bahan Cair"),te={class:"container"},ne={class:"main-wrapper"},le={setup(h){const n=ga(),c=V(!1);let m;Z(()=>{m=M(),ya(m,o=>{o?c.value=!0:c.value=!1})});const d=()=>{Ba(m).then(()=>{n.push({name:"Login"})})};return(o,u)=>{const i=ea("router-link"),B=ea("router-view");return p(),b(L,null,[t("nav",Ha,[t("div",Fa,[Qa,t("div",Wa,[t("ul",Ga,[t("li",Xa,[s(i,{to:"/daftar-bahan-alat",class:"nav-link","exact-active-class":"active"},{default:x(()=>[Ya]),_:1})]),t("li",Za,[s(i,{to:"/daftar-bahan-padat",class:"nav-link","exact-active-class":"active"},{default:x(()=>[ae]),_:1})]),t("li",null,[s(i,{to:"/daftar-bahan-cair",class:"nav-link","exact-active-class":"active"},{default:x(()=>[ee]),_:1})])]),t("button",{class:"btn btn-danger",onClick:d},"Log out")])])]),t("div",te,[t("div",ne,[s(B)])])],64)}}};var ha=(h,n)=>{const c=h.__vccOpts||h;for(const[m,d]of n)c[m]=d;return c};const se={};function oe(h,n){return p(),b("p",null,"ini halaman home")}var re=ha(se,[["render",oe]]);const _={props:{btn_name:{type:String,default:""},btn_class:{type:String,default:""}},emits:["onClick"],setup(h,{emit:n}){return(c,m)=>(p(),b("button",{class:wa(h.btn_class),type:"button",onClick:m[0]||(m[0]=d=>n("onClick"))},D(h.btn_name),3))}};const ue={class:"table-responsive"},de={class:"table table-striped"},ie=["id"],ce={props:{cols:{type:Array,default:[]},rows:{type:Array,default:[]},button_delete_func:{type:Function}},setup(h){return(n,c)=>(p(),b("div",ue,[t("table",de,[t("thead",null,[t("tr",null,[(p(!0),b(L,null,na(h.cols,(m,d)=>(p(),b("th",{key:d},D(m),1))),128))])]),t("tbody",null,[(p(!0),b(L,null,na(h.rows,(m,d)=>(p(),b("tr",{key:d,id:d},[t("td",null,D(d+1),1),t("td",null,D(m.nama_alat),1),t("td",null,D(m.stok_alat),1),t("td",null,[s(_,{type:"button",btn_name:"Hapus",btn_class:"btn btn-danger",id:"hapus-"+d,onOnClick:o=>h.button_delete_func(m.id_alat)},null,8,["id","onOnClick"])])],8,ie))),128))])])]))}};var _a=ha(ce,[["__scopeId","data-v-0800cc2b"]]);const me=["id"],he={class:"offcanvas-header"},_e={id:"offcanvasRightLabel"},fe=t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),pe={class:"offcanvas-body"},E={props:{offcanvas_title:{type:String,default:""},offcanvas_id:{type:String,default:""}},setup(h){return(n,c)=>(p(),b("div",{class:"offcanvas offcanvas-end",tabindex:"-1",id:h.offcanvas_id},[t("div",he,[t("h5",_e,D(h.offcanvas_title),1),fe]),t("div",pe,[$a(n.$slots,"default")])],8,me))}},be={class:"form-floating mb-3"},ge=["placeholder","value","required"],ve={for:"floatingInput"},fa={props:{label_name:{type:String,default:""},placeholder_text:{type:String,default:""},modelValue:{type:String},required:{type:String}},emits:["update:modelValue"],setup(h,{emit:n}){const c=h,m=d=>n("update:modelValue",d);return(d,o)=>(p(),b("div",be,[t("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:h.placeholder_text,value:c.modelValue,onInput:o[0]||(o[0]=u=>m(u.target.value)),required:h.required},null,40,ge),t("label",ve,D(h.label_name),1)]))}},ke={class:"form-floating mb-3"},ye=["placeholder","value","required"],Be={for:"floatingInput"},O={props:{label_name:{type:String,default:""},placeholder_text:{type:String,default:""},modelValue:{type:Number,default:0},required:{type:String}},emits:["update:modelValue"],setup(h,{emit:n}){const c=h,m=o=>{let u=o.keyCode;(u<48||u>57)&&o.preventDefault()},d=o=>n("update:modelValue",o==""||o==null?0:o);return(o,u)=>(p(),b("div",ke,[t("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:h.placeholder_text,maxlength:10,value:c.modelValue,onKeypress:u[0]||(u[0]=i=>m(i)),onInput:u[1]||(u[1]=i=>d(i.target.value)),required:h.required},null,40,ye),t("label",Be,D(h.label_name),1)]))}},we={class:"form-floating"},$e=["value","placeholder","required"],Ve={for:"floatingTextarea"},q={props:{label_name:{type:String,default:""},placeholder_text:{type:String,default:""},modelValue:{type:String},required:{type:Boolean}},emits:["update:modelValue"],setup(h,{emit:n}){const c=h,m=d=>n("update:modelValue",d);return(d,o)=>(p(),b("div",we,[t("textarea",{class:"form-control",value:c.modelValue,placeholder:h.placeholder_text,id:"floatingTextarea",onInput:o[0]||(o[0]=u=>m(u.target.value)),required:h.required},null,40,$e),t("label",Ve,D(h.label_name),1)]))}},xe=["value"],pa={props:{selected:{type:Number},options:{type:Array}},emits:["update:selected"],setup(h,{emit:n}){return(c,m)=>(p(),b("select",{class:"form-select",onChange:m[0]||(m[0]=d=>n("update:selected",d.target.value)),value:h.selected},[(p(!0),b(L,null,na(h.options,(d,o)=>(p(),b("option",{key:o},D(d),1))),128))],40,xe))}};const Ce={apiKey:"AIzaSyCT4QIgdp-qEyKeImIKvpgacUgPzocNI-E",authDomain:"unimuslab.firebaseapp.com",projectId:"unimuslab",storageBucket:"unimuslab.appspot.com",messagingSenderId:"151603669601",appId:"1:151603669601:web:085f3464fbd9744787d820"};var ba=Va(Ce);const je={class:"row"},Ae={class:"col-3"},Pe={class:"d-flex"},De={class:"col-9"},Se=t("br",null,null,-1),Ee={key:0},Oe={class:"row g-3 align-items-center"},qe=t("div",{class:"col-auto"},[t("label",{class:"bold"},"Show :")],-1),Ue={class:"col-auto"},Te={class:"d-flex justify-content-center"},Ie={key:1},Le=t("div",{class:"alert alert-secondary text-center"},"Tidak ada data...",-1),Me=[Le],Ne=["onSubmit"],Re=t("br",null,null,-1),Ke={class:"button-group-wrapper"},Je=["onSubmit"],ze=t("label",null,"Nama alat :",-1),He=t("br",null,null,-1),Fe=t("br",null,null,-1),Qe={class:"button-group-wrapper"},We=["onSubmit"],Ge=t("label",null,"Nama alat :",-1),Xe=t("br",null,null,-1),Ye=t("br",null,null,-1),Ze={class:"button-group-wrapper"},at={setup(h){let n=$({data:[],page:1,currentPage:1,currentEntries:10,showEntries:[10,25,50]}),c=V(""),m=["No.","Nama Alat","Jumlah Stok","Hapus alat"];V(!0),V(!1);const d=M().currentUser;let o=$({nama:"",jumlah:0,keterangan:""}),u=$({id:"",jumlah:0,keterangan:""}),i=$({id:"",jumlah:0,keterangan:""});V(null);const B=la(ba),U=sa(B,"DaftarAlat");Z(()=>{k()});const A=r=>{var a=document.getElementById(r),e=new C(a);e.show()},z=()=>T,T=N(()=>{let r=n.data.filter(y=>y.nama_alat.toLowerCase().indexOf(c.value.toLowerCase())!=-1),a=n.currentEntries,e=H(r,a);return r.length%a>=1?n.page=Math.floor(r.length/a)+1:n.page=Math.floor(r.length/a),e[n.currentPage-1]}),I=N(()=>{const r=[];return n.data.map(a=>{let e=Object.create({});e.value=a.id_alat,e.label=a.nama_alat,r.push(e)}),r}),k=async()=>{await oa(ra(U,ua("nama"))).then(r=>{r.docs.forEach(a=>{const e=a.data().PengadaanAlat.reduce((f,v)=>v.jumlah_alat>0?f+=v.jumlah_alat:f,0),y=a.data().AlatRusak.reduce((f,v)=>v.jumlah_rusak>0?f+=v.jumlah_rusak:f,0);let g=e-y;g=g>=0?g:0,n.data.push({id_alat:a.id,nama_alat:a.data(0).nama,stok_alat:g}),n.data.length%n.currentEntries>=1?n.page=Math.floor(n.data.length/n.currentEntries)+1:n.page=Math.floor(n.data.length/n.currentEntries)})})},H=(r,a)=>r.reduce((e,y,g)=>{let f=Math.floor(g/a);return(e[f]||(e[f]=[])).push(y),e},[]),F=async()=>{await ma(U,{nama:o.nama,PengadaanAlat:[{jumlah_alat:o.jumlah,tanggal_pengadaan_alat:j.now(),keterangan:o.keterangan,di_input_oleh:d.email}],AlatRusak:[{jumlah_rusak:i.jumlah,tanggal_laporan_rusak:j.now(),keterangan:i.keterangan,di_input_oleh:d.email}]}).then(()=>{n.data=[],k(),o.nama="",o.jumlah=0,o.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-tambah-alat"),a=C.getInstance(r);a.hide()})},Q=async r=>{w.fire({title:"Apakah kamu yakin ingin mengahapus data tersebut?",text:"Data yang terhapus tidak dapat di kembalikan.",showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:"Hapus",cancelButtonText:"Batal",allowOutsideClick:!1,showCloseButton:!0,reverseButtons:!0}).then(a=>{a.isConfirmed&&ca(S(B,"DaftarAlat",r)).then(()=>{n.data=[],k()}).then(()=>{w.fire({icon:"success",title:"Data terhapus!",text:"Data yang terhapus tidak dapat di kembalikan.",confirmButtonColor:"#198754",confirmButtonText:"Okay",showCloseButton:!0})})})},W=async()=>{await K(S(B,"DaftarAlat",u.id),{PengadaanAlat:J({jumlah_alat:u.jumlah,tanggal_pengadaan_alat:j.now(),keterangan:u.keterangan,di_input_oleh:d.email})}).then(()=>{n.data=[],k(),u.id="",u.jumlah=0,u.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-pengadaan-alat"),a=C.getInstance(r);a.hide()})},G=async()=>{await K(S(B,"DaftarAlat",i.id),{AlatRusak:J({jumlah_rusak:i.jumlah,tanggal_laporan_rusak:j.now(),keterangan:i.keterangan,di_input_oleh:d.email})}).then(()=>{n.data=[],k(),i.id="",i.jumlah=0,i.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-lapor-alat-rusak"),a=C.getInstance(r);a.hide()})};return(r,a)=>(p(),b(L,null,[t("div",je,[t("div",Ae,[t("div",Pe,[X(t("input",{class:"form-control me-2",type:"search",placeholder:"Tulis nama alat","aria-label":"Search","onUpdate:modelValue":a[0]||(a[0]=e=>da(c)?c.value=e:c=e)},null,512),[[Y,l(c),void 0,{trim:!0}]])])]),t("div",De,[s(_,{btn_class:"btn btn-outline-warning float-md-end",btn_name:"Lapor Alat Rusak",onClick:a[1]||(a[1]=e=>A("offcanvas-lapor-alat-rusak"))}),s(_,{btn_class:"btn btn-outline-success float-md-end mx-4",btn_name:"Pengadaan Alat",onClick:a[2]||(a[2]=e=>A("offcanvas-pengadaan-alat"))}),s(_,{btn_class:"btn btn-success float-md-end",btn_name:"Tambah Alat Baru",onClick:a[3]||(a[3]=e=>A("offcanvas-tambah-alat"))})])]),Se,l(n).data.length>0?(p(),b("div",Ee,[t("div",Oe,[qe,t("div",Ue,[s(pa,{options:l(n).showEntries,selected:l(n).currentEntries,"onUpdate:selected":a[4]||(a[4]=e=>l(n).currentEntries=e),selectedModifiers:{number:!0},onChange:z},null,8,["options","selected"])])]),s(_a,{cols:l(m),rows:l(T),button_delete_func:Q},null,8,["cols","rows"]),t("div",Te,[s(l(ia),{modelValue:l(n).currentPage,"onUpdate:modelValue":a[5]||(a[5]=e=>l(n).currentPage=e),pages:l(n).page,"range-size":l(n).currentPage},null,8,["modelValue","pages","range-size"])])])):(p(),b("div",Ie,Me)),s(E,{offcanvas_title:"Tambah Alat Baru",offcanvas_id:"offcanvas-tambah-alat"},{default:x(()=>[t("form",{onSubmit:P(F,["prevent"])},[s(fa,{label_name:"Nama Alat",placeholder_text:"Nama Alat",modelValue:l(o).nama,"onUpdate:modelValue":a[6]||(a[6]=e=>l(o).nama=e),required:"required"},null,8,["modelValue"]),s(O,{label_name:"Jumlah Alat",placeholder_text:"Jumlah Alat",modelValue:l(o).jumlah,"onUpdate:modelValue":a[7]||(a[7]=e=>l(o).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(o).keterangan,"onUpdate:modelValue":a[8]||(a[8]=e=>l(o).keterangan=e)},null,8,["modelValue"]),Re,t("div",Ke,[s(_,{type:"submit",btn_name:"Tambah",btn_class:"btn btn-success"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,Ne)]),_:1}),s(E,{offcanvas_title:"Pengadaan Alat",offcanvas_id:"offcanvas-pengadaan-alat"},{default:x(()=>[t("form",{onSubmit:P(W,["prevent"])},[ze,s(l(R),{modelValue:l(u).id,"onUpdate:modelValue":a[9]||(a[9]=e=>l(u).id=e),searchable:!0,options:l(I),placeholder:"Masukkan nama alat...",required:!0},null,8,["modelValue","options"]),He,s(O,{label_name:"Jumlah Pengadaan Alat",placeholder_text:"Jumlah Pengadaan Alat",modelValue:l(u).jumlah,"onUpdate:modelValue":a[10]||(a[10]=e=>l(u).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(u).keterangan,"onUpdate:modelValue":a[11]||(a[11]=e=>l(u).keterangan=e)},null,8,["modelValue"]),Fe,t("div",Qe,[s(_,{type:"submit",btn_name:"Tambah",btn_class:"btn btn-success"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,Je)]),_:1}),s(E,{offcanvas_title:"Lapor Alat Rusak",offcanvas_id:"offcanvas-lapor-alat-rusak"},{default:x(()=>[t("form",{onSubmit:P(G,["prevent"])},[Ge,s(l(R),{modelValue:l(i).id,"onUpdate:modelValue":a[12]||(a[12]=e=>l(i).id=e),searchable:!0,options:l(I),placeholder:"Masukkan nama alat...",required:!0},null,8,["modelValue","options"]),Xe,s(O,{label_name:"Jumlah Pengadaan Alat",placeholder_text:"Jumlah Pengadaan Alat",modelValue:l(i).jumlah,"onUpdate:modelValue":a[13]||(a[13]=e=>l(i).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(i).keterangan,"onUpdate:modelValue":a[14]||(a[14]=e=>l(i).keterangan=e)},null,8,["modelValue"]),Ye,t("div",Ze,[s(_,{type:"submit",btn_name:"Lapor",btn_class:"btn btn-warning"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,We)]),_:1})],64))}};const et={class:"row"},tt={class:"col-3"},nt={class:"d-flex"},lt={class:"col-9"},st=t("br",null,null,-1),ot={key:0},rt={class:"row g-3 align-items-center"},ut=t("div",{class:"col-auto"},[t("label",{class:"bold"},"Show :")],-1),dt={class:"col-auto"},it={class:"d-flex justify-content-center"},ct={key:1},mt=t("div",{class:"alert alert-secondary text-center"},"Tidak ada data...",-1),ht=[mt],_t=["onSubmit"],ft=t("br",null,null,-1),pt={class:"button-group-wrapper"},bt=["onSubmit"],gt=t("label",null,"Nama Bahan :",-1),vt=t("br",null,null,-1),kt=t("br",null,null,-1),yt={class:"button-group-wrapper"},Bt=["onSubmit"],wt=t("label",null,"Nama Bahan :",-1),$t=t("br",null,null,-1),Vt=t("br",null,null,-1),xt={class:"button-group-wrapper"},Ct={setup(h){let n=$({data:[],page:1,currentPage:1,currentEntries:10,showEntries:[10,25,50]}),c=V(""),m=["No.","Nama Bahan","Jumlah Stok (gram)","Hapus bahan"];V(!0),V(!1);const d=M().currentUser;let o=$({nama:"",jumlah:0,keterangan:""}),u=$({id:"",jumlah:0,keterangan:""}),i=$({id:"",jumlah:0,keterangan:""});V(null);const B=la(ba),U=sa(B,"DaftarBahanPadat");Z(()=>{k()});const A=r=>{var a=document.getElementById(r),e=new C(a);e.show()},z=()=>T,T=N(()=>{let r=n.data.filter(y=>y.nama_alat.toLowerCase().indexOf(c.value.toLowerCase())!=-1),a=n.currentEntries,e=H(r,a);return r.length%a>=1?n.page=Math.floor(r.length/a)+1:n.page=Math.floor(r.length/a),e[n.currentPage-1]}),I=N(()=>{const r=[];return n.data.map(a=>{let e=Object.create({});e.value=a.id_alat,e.label=a.nama_alat,r.push(e)}),r}),k=async()=>{await oa(ra(U,ua("nama_bahan"))).then(r=>{r.docs.forEach(a=>{const e=a.data().PengadaanBahan.reduce((f,v)=>v.jumlah_bahan>0?f+=v.jumlah_bahan:f,0),y=a.data().BahanRusak.reduce((f,v)=>v.jumlah_bahan>0?f+=v.jumlah_bahan:f,0);let g=e-y;g=g>=0?g:0,n.data.push({id_alat:a.id,nama_alat:a.data(0).nama_bahan,stok_alat:g}),n.data.length%n.currentEntries>=1?n.page=Math.floor(n.data.length/n.currentEntries)+1:n.page=Math.floor(n.data.length/n.currentEntries)})})},H=(r,a)=>r.reduce((e,y,g)=>{let f=Math.floor(g/a);return(e[f]||(e[f]=[])).push(y),e},[]),F=async()=>{await ma(U,{nama_bahan:o.nama,PengadaanBahan:[{jumlah_bahan:o.jumlah,tanggal_pengadaan_bahan:j.now(),keterangan:o.keterangan,di_input_oleh:d.email}],BahanRusak:[{jumlah_bahan:i.jumlah,tanggal_laporan_bahan:j.now(),keterangan:i.keterangan,di_input_oleh:d.email}]}).then(()=>{n.data=[],k(),o.nama="",o.jumlah=0,o.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-tambah-bahan"),a=C.getInstance(r);a.hide()})},Q=async r=>{w.fire({title:"Apakah kamu yakin ingin mengahapus data tersebut?",text:"Data yang terhapus tidak dapat di kembalikan.",showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:"Hapus",cancelButtonText:"Batal",allowOutsideClick:!1,showCloseButton:!0,reverseButtons:!0}).then(a=>{a.isConfirmed&&ca(S(B,"DaftarBahanPadat",r)).then(()=>{n.data=[],k()}).then(()=>{w.fire({icon:"success",title:"Data terhapus!",text:"Data yang terhapus tidak dapat di kembalikan.",confirmButtonColor:"#198754",confirmButtonText:"Okay",showCloseButton:!0})})})},W=async()=>{await K(S(B,"DaftarBahanPadat",u.id),{PengadaanBahan:J({jumlah_bahan:u.jumlah,tanggal_pengadaan_bahan:j.now(),keterangan:u.keterangan,di_input_oleh:d.email})}).then(()=>{n.data=[],k(),u.id="",u.jumlah=0,u.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-pengadaan-alat"),a=C.getInstance(r);a.hide()})},G=async()=>{await K(S(B,"DaftarBahanPadat",i.id),{BahanRusak:J({jumlah_bahan:i.jumlah,tanggal_laporan_bahan:j.now(),keterangan:i.keterangan,di_input_oleh:d.email})}).then(()=>{n.data=[],k(),i.id="",i.jumlah=0,i.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-lapor-alat-rusak"),a=C.getInstance(r);a.hide()})};return(r,a)=>(p(),b(L,null,[t("div",et,[t("div",tt,[t("div",nt,[X(t("input",{class:"form-control me-2",type:"search",placeholder:"Tulis nama bahan padat","aria-label":"Search","onUpdate:modelValue":a[0]||(a[0]=e=>da(c)?c.value=e:c=e)},null,512),[[Y,l(c),void 0,{trim:!0}]])])]),t("div",lt,[s(_,{btn_class:"btn btn-outline-warning float-md-end",btn_name:"Lapor Bahan Rusak",onClick:a[1]||(a[1]=e=>A("offcanvas-lapor-alat-rusak"))}),s(_,{btn_class:"btn btn-outline-success float-md-end mx-4",btn_name:"Pengadaan Bahan",onClick:a[2]||(a[2]=e=>A("offcanvas-pengadaan-alat"))}),s(_,{btn_class:"btn btn-success float-md-end",btn_name:"Tambah Bahan Baru",onClick:a[3]||(a[3]=e=>A("offcanvas-tambah-bahan"))})])]),st,l(n).data.length>0?(p(),b("div",ot,[t("div",rt,[ut,t("div",dt,[s(pa,{options:l(n).showEntries,selected:l(n).currentEntries,"onUpdate:selected":a[4]||(a[4]=e=>l(n).currentEntries=e),selectedModifiers:{number:!0},onChange:z},null,8,["options","selected"])])]),s(_a,{cols:l(m),rows:l(T),button_delete_func:Q},null,8,["cols","rows"]),t("div",it,[s(l(ia),{modelValue:l(n).currentPage,"onUpdate:modelValue":a[5]||(a[5]=e=>l(n).currentPage=e),pages:l(n).page,"range-size":l(n).currentPage},null,8,["modelValue","pages","range-size"])])])):(p(),b("div",ct,ht)),s(E,{offcanvas_title:"Tambah Bahan Padat",offcanvas_id:"offcanvas-tambah-bahan"},{default:x(()=>[t("form",{onSubmit:P(F,["prevent"])},[s(fa,{label_name:"Nama Bahan",placeholder_text:"Nama Bahan",modelValue:l(o).nama,"onUpdate:modelValue":a[6]||(a[6]=e=>l(o).nama=e),required:"required"},null,8,["modelValue"]),s(O,{label_name:"Jumlah Bahan (gram)",placeholder_text:"Jumlah Bahan (gram)",modelValue:l(o).jumlah,"onUpdate:modelValue":a[7]||(a[7]=e=>l(o).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(o).keterangan,"onUpdate:modelValue":a[8]||(a[8]=e=>l(o).keterangan=e)},null,8,["modelValue"]),ft,t("div",pt,[s(_,{type:"submit",btn_name:"Tambah",btn_class:"btn btn-success"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,_t)]),_:1}),s(E,{offcanvas_title:"Pengadaan Bahan Padat",offcanvas_id:"offcanvas-pengadaan-alat"},{default:x(()=>[t("form",{onSubmit:P(W,["prevent"])},[gt,s(l(R),{modelValue:l(u).id,"onUpdate:modelValue":a[9]||(a[9]=e=>l(u).id=e),searchable:!0,options:l(I),placeholder:"Masukkan nama bahan...",required:!0},null,8,["modelValue","options"]),vt,s(O,{label_name:"Jumlah Pengadaan Bahan",placeholder_text:"Jumlah Pengadaan Bahan",modelValue:l(u).jumlah,"onUpdate:modelValue":a[10]||(a[10]=e=>l(u).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(u).keterangan,"onUpdate:modelValue":a[11]||(a[11]=e=>l(u).keterangan=e)},null,8,["modelValue"]),kt,t("div",yt,[s(_,{type:"submit",btn_name:"Tambah",btn_class:"btn btn-success"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,bt)]),_:1}),s(E,{offcanvas_title:"Lapor Bahan Padat Rusak",offcanvas_id:"offcanvas-lapor-alat-rusak"},{default:x(()=>[t("form",{onSubmit:P(G,["prevent"])},[wt,s(l(R),{modelValue:l(i).id,"onUpdate:modelValue":a[12]||(a[12]=e=>l(i).id=e),searchable:!0,options:l(I),placeholder:"Masukkan nama bahan...",required:!0},null,8,["modelValue","options"]),$t,s(O,{label_name:"Jumlah Pengadaan Bahan",placeholder_text:"Jumlah Pengadaan Bahan",modelValue:l(i).jumlah,"onUpdate:modelValue":a[13]||(a[13]=e=>l(i).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(i).keterangan,"onUpdate:modelValue":a[14]||(a[14]=e=>l(i).keterangan=e)},null,8,["modelValue"]),Vt,t("div",xt,[s(_,{type:"submit",btn_name:"Lapor",btn_class:"btn btn-warning"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,Bt)]),_:1})],64))}};const jt={class:"row"},At={class:"col-3"},Pt={class:"d-flex"},Dt={class:"col-9"},St=t("br",null,null,-1),Et={key:0},Ot={class:"row g-3 align-items-center"},qt=t("div",{class:"col-auto"},[t("label",{class:"bold"},"Show :")],-1),Ut={class:"col-auto"},Tt={class:"d-flex justify-content-center"},It={key:1},Lt=t("div",{class:"alert alert-secondary text-center"},"Tidak ada data...",-1),Mt=[Lt],Nt=["onSubmit"],Rt=t("br",null,null,-1),Kt={class:"button-group-wrapper"},Jt=["onSubmit"],zt=t("label",null,"Nama Bahan :",-1),Ht=t("br",null,null,-1),Ft=t("br",null,null,-1),Qt={class:"button-group-wrapper"},Wt=["onSubmit"],Gt=t("label",null,"Nama Bahan :",-1),Xt=t("br",null,null,-1),Yt=t("br",null,null,-1),Zt={class:"button-group-wrapper"},an={setup(h){let n=$({data:[],page:1,currentPage:1,currentEntries:10,showEntries:[10,25,50]}),c=V(""),m=["No.","Nama Bahan","Jumlah Stok (liter)","Hapus bahan"];V(!0),V(!1);const d=M().currentUser;let o=$({nama:"",jumlah:0,keterangan:""}),u=$({id:"",jumlah:0,keterangan:""}),i=$({id:"",jumlah:0,keterangan:""});V(null);const B=la(ba),U=sa(B,"DaftarBahanCair");Z(()=>{k()});const A=r=>{var a=document.getElementById(r),e=new C(a);e.show()},z=()=>T,T=N(()=>{let r=n.data.filter(y=>y.nama_alat.toLowerCase().indexOf(c.value.toLowerCase())!=-1),a=n.currentEntries,e=H(r,a);return r.length%a>=1?n.page=Math.floor(r.length/a)+1:n.page=Math.floor(r.length/a),e[n.currentPage-1]}),I=N(()=>{const r=[];return n.data.map(a=>{let e=Object.create({});e.value=a.id_alat,e.label=a.nama_alat,r.push(e)}),r}),k=async()=>{await oa(ra(U,ua("nama_bahan"))).then(r=>{r.docs.forEach(a=>{const e=a.data().PengadaanBahan.reduce((f,v)=>v.jumlah_bahan>0?f+=v.jumlah_bahan:f,0),y=a.data().BahanRusak.reduce((f,v)=>v.jumlah_bahan>0?f+=v.jumlah_bahan:f,0);let g=e-y;g=g>=0?g:0,n.data.push({id_alat:a.id,nama_alat:a.data(0).nama_bahan,stok_alat:g}),n.data.length%n.currentEntries>=1?n.page=Math.floor(n.data.length/n.currentEntries)+1:n.page=Math.floor(n.data.length/n.currentEntries)})})},H=(r,a)=>r.reduce((e,y,g)=>{let f=Math.floor(g/a);return(e[f]||(e[f]=[])).push(y),e},[]),F=async()=>{await ma(U,{nama_bahan:o.nama,PengadaanBahan:[{jumlah_bahan:o.jumlah,tanggal_pengadaan_bahan:j.now(),keterangan:o.keterangan,di_input_oleh:d.email}],BahanRusak:[{jumlah_bahan:i.jumlah,tanggal_laporan_bahan:j.now(),keterangan:i.keterangan,di_input_oleh:d.email}]}).then(()=>{n.data=[],k(),o.nama="",o.jumlah=0,o.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-tambah-bahan"),a=C.getInstance(r);a.hide()})},Q=async r=>{w.fire({title:"Apakah kamu yakin ingin mengahapus data tersebut?",text:"Data yang terhapus tidak dapat di kembalikan.",showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:"Hapus",cancelButtonText:"Batal",allowOutsideClick:!1,showCloseButton:!0,reverseButtons:!0}).then(a=>{a.isConfirmed&&ca(S(B,"DaftarBahanCair",r)).then(()=>{n.data=[],k()}).then(()=>{w.fire({icon:"success",title:"Data terhapus!",text:"Data yang terhapus tidak dapat di kembalikan.",confirmButtonColor:"#198754",confirmButtonText:"Okay",showCloseButton:!0})})})},W=async()=>{await K(S(B,"DaftarBahanCair",u.id),{PengadaanBahan:J({jumlah_bahan:u.jumlah,tanggal_pengadaan_bahan:j.now(),keterangan:u.keterangan,di_input_oleh:d.email})}).then(()=>{n.data=[],k(),u.id="",u.jumlah=0,u.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-pengadaan-alat"),a=C.getInstance(r);a.hide()})},G=async()=>{await K(S(B,"DaftarBahanCair",i.id),{BahanRusak:J({jumlah_bahan:i.jumlah,tanggal_laporan_bahan:j.now(),keterangan:i.keterangan,di_input_oleh:d.email})}).then(()=>{n.data=[],k(),i.id="",i.jumlah=0,i.keterangan=""}).then(()=>{w.fire({icon:"success",title:"Data yang anda masukkan, berhasil di simpan.",showConfirmButton:!1,timer:1500});var r=document.getElementById("offcanvas-lapor-alat-rusak"),a=C.getInstance(r);a.hide()})};return(r,a)=>(p(),b(L,null,[t("div",jt,[t("div",At,[t("div",Pt,[X(t("input",{class:"form-control me-2",type:"search",placeholder:"Tulis nama bahan cair","aria-label":"Search","onUpdate:modelValue":a[0]||(a[0]=e=>da(c)?c.value=e:c=e)},null,512),[[Y,l(c),void 0,{trim:!0}]])])]),t("div",Dt,[s(_,{btn_class:"btn btn-outline-warning float-md-end",btn_name:"Lapor Bahan Rusak",onClick:a[1]||(a[1]=e=>A("offcanvas-lapor-alat-rusak"))}),s(_,{btn_class:"btn btn-outline-success float-md-end mx-4",btn_name:"Pengadaan Bahan",onClick:a[2]||(a[2]=e=>A("offcanvas-pengadaan-alat"))}),s(_,{btn_class:"btn btn-success float-md-end",btn_name:"Tambah Bahan Baru",onClick:a[3]||(a[3]=e=>A("offcanvas-tambah-bahan"))})])]),St,l(n).data.length>0?(p(),b("div",Et,[t("div",Ot,[qt,t("div",Ut,[s(pa,{options:l(n).showEntries,selected:l(n).currentEntries,"onUpdate:selected":a[4]||(a[4]=e=>l(n).currentEntries=e),selectedModifiers:{number:!0},onChange:z},null,8,["options","selected"])])]),s(_a,{cols:l(m),rows:l(T),button_delete_func:Q},null,8,["cols","rows"]),t("div",Tt,[s(l(ia),{modelValue:l(n).currentPage,"onUpdate:modelValue":a[5]||(a[5]=e=>l(n).currentPage=e),pages:l(n).page,"range-size":l(n).currentPage},null,8,["modelValue","pages","range-size"])])])):(p(),b("div",It,Mt)),s(E,{offcanvas_title:"Tambah Bahan Cair",offcanvas_id:"offcanvas-tambah-bahan"},{default:x(()=>[t("form",{onSubmit:P(F,["prevent"])},[s(fa,{label_name:"Nama Bahan",placeholder_text:"Nama Bahan",modelValue:l(o).nama,"onUpdate:modelValue":a[6]||(a[6]=e=>l(o).nama=e),required:"required"},null,8,["modelValue"]),s(O,{label_name:"Jumlah Bahan (liter)",placeholder_text:"Jumlah Bahan (liter)",modelValue:l(o).jumlah,"onUpdate:modelValue":a[7]||(a[7]=e=>l(o).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(o).keterangan,"onUpdate:modelValue":a[8]||(a[8]=e=>l(o).keterangan=e)},null,8,["modelValue"]),Rt,t("div",Kt,[s(_,{type:"submit",btn_name:"Tambah",btn_class:"btn btn-success"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,Nt)]),_:1}),s(E,{offcanvas_title:"Pengadaan Bahan Cair",offcanvas_id:"offcanvas-pengadaan-alat"},{default:x(()=>[t("form",{onSubmit:P(W,["prevent"])},[zt,s(l(R),{modelValue:l(u).id,"onUpdate:modelValue":a[9]||(a[9]=e=>l(u).id=e),searchable:!0,options:l(I),placeholder:"Masukkan nama bahan...",required:!0},null,8,["modelValue","options"]),Ht,s(O,{label_name:"Jumlah Pengadaan Bahan",placeholder_text:"Jumlah Pengadaan Bahan",modelValue:l(u).jumlah,"onUpdate:modelValue":a[10]||(a[10]=e=>l(u).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(u).keterangan,"onUpdate:modelValue":a[11]||(a[11]=e=>l(u).keterangan=e)},null,8,["modelValue"]),Ft,t("div",Qt,[s(_,{type:"submit",btn_name:"Tambah",btn_class:"btn btn-success"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,Jt)]),_:1}),s(E,{offcanvas_title:"Lapor Bahan Cair Rusak",offcanvas_id:"offcanvas-lapor-alat-rusak"},{default:x(()=>[t("form",{onSubmit:P(G,["prevent"])},[Gt,s(l(R),{modelValue:l(i).id,"onUpdate:modelValue":a[12]||(a[12]=e=>l(i).id=e),searchable:!0,options:l(I),placeholder:"Masukkan nama bahan...",required:!0},null,8,["modelValue","options"]),Xt,s(O,{label_name:"Jumlah Pengadaan Bahan",placeholder_text:"Jumlah Pengadaan Bahan",modelValue:l(i).jumlah,"onUpdate:modelValue":a[13]||(a[13]=e=>l(i).jumlah=e),modelModifiers:{number:!0},required:"required"},null,8,["modelValue"]),s(q,{label_name:"Keterangan",placeholder_text:"Keterangan",modelValue:l(i).keterangan,"onUpdate:modelValue":a[14]||(a[14]=e=>l(i).keterangan=e)},null,8,["modelValue"]),Yt,t("div",Zt,[s(_,{type:"submit",btn_name:"Lapor",btn_class:"btn btn-warning"}),s(_,{type:"button",btn_name:"Batal",btn_class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas","aria-label":"Close"})])],40,Wt)]),_:1})],64))}},en=[{path:"/login",name:"Login",component:za},{path:"/",name:"Dashboard",component:le,meta:{requiresAuth:!0},children:[{path:"",name:"Home",component:re,meta:{requiresAuth:!0}},{path:"daftar-bahan-alat",name:"DaftarBahanAlat",component:at,meta:{requiresAuth:!0}},{path:"daftar-bahan-padat",name:"DaftarBahanPadat",component:Ct,meta:{requiresAuth:!0}},{path:"daftar-bahan-cair",name:"DaftarBahanCair",component:an,meta:{requiresAuth:!0}}]}],va=xa({history:Ca(),routes:en});va.beforeEach(async(h,n,c)=>{h.matched.some(m=>m.meta.requiresAuth)?M().currentUser?c():c({name:"Login"}):c()});const tn={};function nn(h,n){const c=ea("router-view");return p(),ja(c)}var ln=ha(tn,[["render",nn]]);const aa=Aa(ln);aa.use(va);aa.use(Pa,Da);aa.use(Sa());aa.mount("#app");
